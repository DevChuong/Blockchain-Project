<!DOCTYPE HTML>
<!--
	Industrious by TEMPLATED
	templated.co @templatedco
	Released for free under the Creative Commons Attribution 3.0 license (templated.co/license)
-->
<html>
	<head>
		<title>Industrious by TEMPLATED</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<link rel="stylesheet" href="./cssfiles/signverifymessage.css">
		<script src="./node_modules/web3/dist/web3.min.js"></script>

	</head>
	<body class="is-preload">

		<!-- Header -->
			<header id="header">
				<a class="logo" href="index.html">Block chain project</a>
				<nav>
					<a href="#menu">Menu</a>
				</nav>
			</header>

			<!-- Nav -->
				<nav id="menu">
					<ul class="links">
						<li><a href="index.html">Home</a></li>
						<li><a href="auth_all.html">Authorize</a></li>
						<li><a href="unauth.html">Unauthorize</a></li>
						<li><a href="add_rec.html">Add records</a></li>
						<li><a href="search.html">Look up info</a></li>
						<li><a href="emp_recs.html">Employee records</a></li>
					</ul>
				</nav>

		<!-- Banner -->
			<section id="banner">
				<div class="inner">
					<h1>Block chain in health care</h1>
					<p>This website is used for authorizing/unauthorizing, adding records and looking up information from the system<br />
					it also used for signing and verifying message.</p>
				</div>
				<video autoplay loop muted playsinline src="images/hospital.mp4"></video>
			</section>

		<!-- Highlights -->

		<section>

			<div class="signverify_section">
				<select name="category" id="category">
					<option value="none">- Select your choice please. -</option>
					<option value="sign_choice">Sign Section</option>
					<option value="verify_choice">Verify Section</option>
				</select>
			</div>

	  	    <div class="sign_section">
				<div class="description">
					<p>Input the message you want to sign below. Then copy the signature and paste it into "Signature" field when adding Employee Records !</p>
				</div>

				<div class="message">
					<h3>your message:</h3>
					<input class="form-control" type="text" placeholder="Type your message here">
				</div>


	          <button id="button1" type="button" class="btn btn-primary">Sign</button>

		        <div class="signature_result">
		        	<br>
		        	<br>
		        	<br>
		        	<br>
		          <h3 id="signature">Your Signature:</h3>
		          <p id="signature"></p>
		        </div>
	    	</div>

	    	<div class="verify_section">

				<div class="hospital_info">
					<h3>Employee Certificate</h3>
					<input type="text" id = "1st" class="form-control" style = " font-size: larger;" placeholder="Please input the employee certificate..">
				</div>

				<div class="hospital_info">
					<h3>Signature</h3>
					<input type="text" id ="2nd" class="form-control" style = " font-size: larger;" placeholder="Please input the hospital address..">
				</div>

				<div class="authorise_button">
					<button id="button2" type="button" class="btn btn-success" style="margin-top: 65px; margin-right: 270px; width: 235px; height: 65px;font-size: 24px;  float: right;
					font-family: Lucida,Monaco, monospace;">Verify</button>
				</div>

				<div class="verify-signer" style="margin-top:180px; margin-left:200px;font-family: Lucida,Monaco, monospace;">
					<h3 id="signer-address">Signer Address</h3>
					<p id="signer-address-return" style="font-family: Lucida,Monaco, monospace;font-size:20px; "></p>
				</div>
	    	</div>

		</section>




		<!-- Footer -->
		<footer id="footer">
			<div class="inner">
				<div class="content">
					<section>
						<h3>About the project</h3>
						<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum..</p>
					</section>
					<section>
						<h4>Functions</h4>
						<ul class="alt">
							<li><a href="index.html">Home</a></li>
							<li><a href="auth_all.html">Authorize</a></li>
							<li><a href="unauth.html">Unauthorize</a></li>
							<li><a href="add_rec.html">Add records</a></li>
							<li><a href="lookuppage.html">Look up info</a></li>
							<li><a href="lookuprecords.html">Employee records</a></li>
						</ul>
					</section>
					<section>
						<h4>Team social media</h4>
						<ul class="plain">
							<li><a href="#"><i class="icon fa-twitter">&nbsp;</i>Twitter</a></li>
							<li><a href="#"><i class="icon fa-facebook">&nbsp;</i>Facebook</a></li>
							<li><a href="#"><i class="icon fa-instagram">&nbsp;</i>Instagram</a></li>
							<li><a href="#"><i class="icon fa-github">&nbsp;</i>Github</a></li>
						</ul>
					</section>
				</div>
				<div class="copyright">
					&copy; This is the blockchain project website.
				</div>
			</div>
		</footer>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>



			<!-- show hide -->
			<script>
				$(function() {
					$("select").change(function() {
						if($(this).val() == "sign_choice") {
							$(".sign_section").show();
							$(".verify_section").hide();
						}
						else if ($(this).val() == "verify_choice") {
							$(".sign_section").hide();
							$(".verify_section").show();
						}
						else {
							$(".sign_section").hide();
							$(".verify_section").hide();
						}
					});
				});
			</script>


			<!-- sign message -->
			<script>
 				$(function() {
					$("#button1").click(function() {
						var message = $(".form-control").val();
						var messageHashed = web3.sha3(message);
						var signature = web3.eth.sign(account, messageHashed);
						if(message == "") {
							alert(" please input first");
						} else {
							$(".signature_result").show();
							$("p#signature").text(signature);
						}
					});
				});

			</script>

			<!-- verify message -->
			<script>
				$(function() {
					$("#signer-address").hide();
					$("#button2").click(function() {
						var EmployeeCertificate = $("#1st:text").val();
						var Signature = $("#2nd:text").val();
						var messageHashed = web3.sha3(EmployeeCertificate);
						var SignerAddress = contract.recoverSigner(messageHashed, Signature, {from : account, gas : 3000000});
				        $("#signer-address").show();
	        			$("p#signer-address-return").text(SignerAddress);
					});
				});

			</script>






			<script>

				if(typeof web3 !== 'undefined'){
					web3 = new Web3(web3.currentProvider);
				} else {
					web3 = new Web3(new Web3.providers.HttpProvider("HTTP://127.0.0.1:7545"));
				}

				web3.eth.defaultAccount =  web3.eth.accounts[1];
				var account = web3.eth.defaultAccount;
				var contract = web3.eth.contract([
					{
						"constant": false,
						"inputs": [
							{
								"name": "_TraineeAddress",
								"type": "address"
							}
						],
						"name": "getListOfTraineesRecords",
						"outputs": [],
						"payable": false,
						"stateMutability": "nonpayable",
						"type": "function"
					},
					{
						"constant": false,
						"inputs": [
							{
								"name": "_HospitalAddress",
								"type": "address"
							},
							{
								"name": "_TraineeAddress",
								"type": "address"
							},
							{
								"name": "_TraineeID",
								"type": "uint256"
							},
							{
								"name": "_TraineeName",
								"type": "string"
							},
							{
								"name": "_TrHospitalName",
								"type": "string"
							}
						],
						"name": "Add_Employees",
						"outputs": [],
						"payable": false,
						"stateMutability": "nonpayable",
						"type": "function"
					},
					{
						"constant": true,
						"inputs": [
							{
								"name": "",
								"type": "uint256"
							}
						],
						"name": "OfficialEmployees",
						"outputs": [
							{
								"name": "",
								"type": "address"
							}
						],
						"payable": false,
						"stateMutability": "view",
						"type": "function"
					},
					{
						"constant": true,
						"inputs": [],
						"name": "getListOfTrainees",
						"outputs": [
							{
								"components": [
									{
										"name": "_TraineeAddress",
										"type": "address"
									},
									{
										"name": "_TraineeID",
										"type": "uint256"
									},
									{
										"name": "_TraineeName",
										"type": "string"
									},
									{
										"name": "_TrHospitaName",
										"type": "string"
									},
									{
										"name": "_Category",
										"type": "string"
									},
									{
										"name": "_TraineeCertificate",
										"type": "string"
									},
									{
										"name": "_Signature",
										"type": "string"
									}
								],
								"name": "",
								"type": "tuple[]"
							}
						],
						"payable": false,
						"stateMutability": "view",
						"type": "function"
					},
					{
						"constant": true,
						"inputs": [],
						"name": "getListOfHospitals",
						"outputs": [
							{
								"components": [
									{
										"name": "_HospitalAddress",
										"type": "address"
									},
									{
										"name": "_HospitalID",
										"type": "uint256"
									},
									{
										"name": "_HospitalName",
										"type": "string"
									}
								],
								"name": "",
								"type": "tuple[]"
							}
						],
						"payable": false,
						"stateMutability": "view",
						"type": "function"
					},
					{
						"constant": true,
						"inputs": [
							{
								"name": "_TraineeAddress",
								"type": "address"
							}
						],
						"name": "See_Employee_Info",
						"outputs": [
							{
								"name": "",
								"type": "uint256"
							},
							{
								"name": "",
								"type": "string"
							},
							{
								"name": "",
								"type": "string"
							}
						],
						"payable": false,
						"stateMutability": "view",
						"type": "function"
					},
					{
						"constant": true,
						"inputs": [
							{
								"name": "_TraineeAddress",
								"type": "address"
							}
						],
						"name": "See_Employee_Latest_Records",
						"outputs": [
							{
								"name": "",
								"type": "uint256"
							},
							{
								"name": "",
								"type": "string"
							},
							{
								"name": "",
								"type": "string"
							},
							{
								"name": "",
								"type": "string"
							},
							{
								"name": "",
								"type": "string"
							},
							{
								"name": "",
								"type": "string"
							}
						],
						"payable": false,
						"stateMutability": "view",
						"type": "function"
					},
					{
						"constant": false,
						"inputs": [
							{
								"name": "_HospitalAddress",
								"type": "address"
							},
							{
								"name": "_TraineeAddress",
								"type": "address"
							},
							{
								"name": "_TraineeID",
								"type": "uint256"
							}
						],
						"name": "deleteEmployee",
						"outputs": [],
						"payable": false,
						"stateMutability": "nonpayable",
						"type": "function"
					},
					{
						"constant": false,
						"inputs": [
							{
								"name": "_HospitalAddress",
								"type": "address"
							},
							{
								"name": "_HospitalID",
								"type": "uint256"
							}
						],
						"name": "deleteHospital",
						"outputs": [],
						"payable": false,
						"stateMutability": "nonpayable",
						"type": "function"
					},
					{
						"constant": true,
						"inputs": [
							{
								"name": "hash",
								"type": "bytes32"
							},
							{
								"name": "sig",
								"type": "bytes"
							}
						],
						"name": "recoverSigner",
						"outputs": [
							{
								"name": "",
								"type": "address"
							}
						],
						"payable": false,
						"stateMutability": "pure",
						"type": "function"
					},
					{
						"constant": true,
						"inputs": [],
						"name": "Records",
						"outputs": [
							{
								"components": [
									{
										"name": "_TraineeAddress",
										"type": "address"
									},
									{
										"name": "_TraineeID",
										"type": "uint256"
									},
									{
										"name": "_TraineeName",
										"type": "string"
									},
									{
										"name": "_TrHospitaName",
										"type": "string"
									},
									{
										"name": "_Category",
										"type": "string"
									},
									{
										"name": "_TraineeCertificate",
										"type": "string"
									},
									{
										"name": "_Signature",
										"type": "string"
									}
								],
								"name": "",
								"type": "tuple[]"
							}
						],
						"payable": false,
						"stateMutability": "view",
						"type": "function"
					},
					{
						"constant": false,
						"inputs": [
							{
								"name": "_HospitalAddress",
								"type": "address"
							},
							{
								"name": "_HospitalID",
								"type": "uint256"
							},
							{
								"name": "_HospitalName",
								"type": "string"
							}
						],
						"name": "Authorise_Hospital",
						"outputs": [],
						"payable": false,
						"stateMutability": "nonpayable",
						"type": "function"
					},
					{
						"constant": false,
						"inputs": [
							{
								"name": "_HospitalAddress",
								"type": "address"
							},
							{
								"name": "_TraineeAddress",
								"type": "address"
							},
							{
								"name": "_TraineeID",
								"type": "uint256"
							},
							{
								"name": "_TraineeName",
								"type": "string"
							},
							{
								"name": "_TrHospitaName",
								"type": "string"
							},
							{
								"name": "_Category",
								"type": "string"
							},
							{
								"name": "_TraineeCertificate",
								"type": "string"
							},
							{
								"name": "_Signature",
								"type": "string"
							}
						],
						"name": "Add_Records",
						"outputs": [],
						"payable": false,
						"stateMutability": "nonpayable",
						"type": "function"
					},
					{
						"constant": true,
						"inputs": [
							{
								"name": "_HospitalAddress",
								"type": "address"
							}
						],
						"name": "See_Authorised_Hospital",
						"outputs": [
							{
								"name": "",
								"type": "address"
							},
							{
								"name": "",
								"type": "uint256"
							},
							{
								"name": "",
								"type": "string"
							}
						],
						"payable": false,
						"stateMutability": "view",
						"type": "function"
					},
					{
						"constant": true,
						"inputs": [],
						"name": "_NationalAuthority",
						"outputs": [
							{
								"name": "",
								"type": "address"
							}
						],
						"payable": false,
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [],
						"payable": false,
						"stateMutability": "nonpayable",
						"type": "constructor"
					},
					{
						"anonymous": false,
						"inputs": [
							{
								"indexed": false,
								"name": "_HospitalAddress",
								"type": "address"
							},
							{
								"indexed": false,
								"name": "_HospitalID",
								"type": "uint256"
							}
						],
						"name": "delete_Hospital",
						"type": "event"
					},
					{
						"anonymous": false,
						"inputs": [
							{
								"indexed": false,
								"name": "_HospitalAddress",
								"type": "address"
							},
							{
								"indexed": false,
								"name": "_TraineeAddress",
								"type": "address"
							},
							{
								"indexed": false,
								"name": "_TraineeID",
								"type": "uint256"
							},
							{
								"indexed": false,
								"name": "_TraineeName",
								"type": "string"
							},
							{
								"indexed": false,
								"name": "_TrHospitaName",
								"type": "string"
							},
							{
								"indexed": false,
								"name": "_Category",
								"type": "string"
							},
							{
								"indexed": false,
								"name": "_TraineeCertificate",
								"type": "string"
							},
							{
								"indexed": false,
								"name": "_Signature",
								"type": "string"
							}
						],
						"name": "add_Records",
						"type": "event"
					}
				]).at("0x0dde98481d145c110c499532f6ea4c08e73ee3c1");


			</script>




	</body>
</html>
