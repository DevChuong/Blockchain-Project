<!DOCTYPE HTML>
<!--
	Industrious by TEMPLATED
	templated.co @templatedco
	Released for free under the Creative Commons Attribution 3.0 license (templated.co/license)
-->
<html>
	<head>
		<title>Industrious by TEMPLATED</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=wdevice-width, initial-scale=1, user-scalable=no" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<link rel="stylesheet" type="text/css" href="cssfiles/lookuppage.css">
		<script src="./node_modules/web3/dist/web3.min.js"></script>


	</head>
	<body class="is-preload">

		<!-- Header -->
			<header id="header">
				<a class="logo" href="index.html">Block chain project</a>
				<nav>
					<a href="#menu">Menu</a>
				</nav>
			</header>

			<!-- Nav -->
				<nav id="menu">
					<ul class="links">
						<li><a href="index.html">Home</a></li>
						<li><a href="auth_all.html">Authorize</a></li>
						<li><a href="unauth.html">Unauthorize</a></li>
						<li><a href="add_rec.html">Add records</a></li>
						<li><a href="signverifymessage.html">Sign/Verify</a></li>
						<li><a href="lookuprecords.html">Employee records</a></li>
					</ul>
				</nav>

		<!-- Banner -->
			<section id="banner">
				<div class="inner">
					<h1>Block chain in health care</h1>
					<p>This website is used for authorizing/unauthorizing, adding records and looking up information from the system<br />
					it also used for signing and verifying message.</p>
				</div>
				<video autoplay loop muted playsinline src="images/hospital.mp4"></video>
			</section>

		<!-- Highlights -->

		<section>
			<div class="lookup_section">
					<select name="category" id="category">
						<option value="none">- Select your choice please. -</option>
						<option value="hospital_choice">Hospital Searching</option>
						<option value="employee_choice">Employee Searching</option>
					</select>
			</div>
			<!-- ------------------------------------------------------------------------------ -->

			<div class="hospital_searching_form">
				<form>
				Hospital Address:<br>
				<input class="form-control-hospital-address" type="text" name="firstname" placeholder="Type your H.A address here" value="" >
				<br><br>
				</form>
				<button>Search</button>
			</div>
			<!-- ------------------------------------------------------------------------------ -->

			<div class="employee_searching_form">
				<form>
				Employee Address:<br>
				<input class="form-control-employee-address" type="text" name="firstname" placeholder="Type your employee address here" value="" >
				<br><br>
				</form>
				<button>Search</button>
			</div>

	        <div class="hospital_info_result_table">

	            <table>
	              <tr>
	                <th style="padding-right:250px;">Hospital Address <br> </th>
	                <th style="padding-left: 105px; padding-right:70px;">Hospital ID <br> </th>
	                <th style="padding-right:70px;">Hospital Name </th>
	              </tr>
	              <tr>
	                <td id="hospital_address"></td>
	                <td id="hospital_id" style="padding-left: 135px; padding-right:70px"></td>
	                <td id="hospital_name" style ="padding-left:30px;"></td>
	              </tr>
	            </table>

	        </div>

			<div class="employee_info_result_table">
				<table>
					<tr>
						<th style="padding-right:250px;">Employee ID <br> </th>
						<th style="padding-left: 5px; padding-right:70px;"> Employee Name <br> </th>
						<th style="padding-right:70px;">Employee Hospital Name </th>
					</tr>
					<tr>
						<td id="employee_id"></td>
						<td id="employee_name" style="padding-left: 15px; padding-right:70px"></td>
						<td id="employee_hospital_name" style ="padding-left:45px;"></td>
					</tr>
				</table>
			</div>






		</section>

		<!-- Footer -->
		<footer id="footer">
			<div class="inner">
				<div class="content">
					<section>
						<h3>About the project</h3>
						<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum..</p>
					</section>
					<section>
						<h4>Functions</h4>
						<ul class="alt">
							<li><a href="index.html">Home</a></li>
							<li><a href="auth_all.html">Authorize</a></li>
							<li><a href="unauth.html">Unauthorize</a></li>
							<li><a href="add_rec.html">Add records</a></li>
							<li><a href="signverifymessage.html">Sign/Verify</a></li>
							<li><a href="lookuprecords.html">Employee records</a></li>
						</ul>
					</section>
					<section>
						<h4>Team social media</h4>
						<ul class="plain">
							<li><a href="#"><i class="icon fa-twitter">&nbsp;</i>Twitter</a></li>
							<li><a href="#"><i class="icon fa-facebook">&nbsp;</i>Facebook</a></li>
							<li><a href="#"><i class="icon fa-instagram">&nbsp;</i>Instagram</a></li>
							<li><a href="#"><i class="icon fa-github">&nbsp;</i>Github</a></li>
						</ul>
					</section>
				</div>
				<div class="copyright">
					&copy; This is the blockchain project website.
				</div>
			</div>
		</footer>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

			<!-- show hide -->
			<script>
				$(function() {
					$("select").change(function() {
						if($(this).val() == "hospital_choice") {
							$(".hospital_searching_form").show();
							//hide other forms
							$(".employee_searching_form").hide();

						}
						else if($(this).val() == "employee_choice") {
							$(".employee_searching_form").show();
							//hide other forms
							$(".hospital_searching_form").hide();

						}
						else {
							// trường hợp chọn giá trị none
							// có forms nào thì ẩn đi hết
							$(".hospital_searching_form").hide();
							$(".employee_searching_form").hide();

						}
					});

				});

			</script>
			<!-- results hospital table -->
			<script>
				$(function() {
					$("button:first").click(function() {


						try {
 						var HospitalAddress = $(".form-control-hospital-address").val();
						var result = contract.See_Authorised_Hospital(HospitalAddress, {from : account, gas : 3000000});
						var address = result[0];
						var id = result[1];
						var name = result[2];
						$("#hospital_address").text(address);
			            $("#hospital_id").text(id);
   					 	$("#hospital_name").text(name);
						$(".hospital_info_result_table").show();
   					 	if(address == "0x0000000000000000000000000000000000000000	"){
				              alert("Error: Couldn't find the hospital. Please check the information again !");
				            }

				          }catch{
				            alert("Error : Please check the information again !");

				          }

				         $("select").change(function() {
 							if($(this).val() == "employee_choice") {
								$(".hospital_info_result_table").hide();
							}
				         });
						$("select").change(function() {
							if($(this).val() == "none") {
								$(".hospital_info_result_table").hide();
								$(".employee_info_result_table").hide();
							}
						});

					});
				});

			</script>
			<!-- result employee table -->
			<script>
				$(function() {
					$("button:odd").click(function() {
						try {

			            var EmployeeAddress = $(".form-control-employee-address").val();
			            var result = contract.See_Employee_Info(EmployeeAddress, {from : account , gas : 3000000});
			            var EmployeeID = result[0];
			            var EmployeeName = result[1];
			            var EmployeeHospitalName = result[2];


			            $("#employee_id").text(EmployeeID);
			            $("#employee_name").text(EmployeeName);
			            $("#employee_hospital_name").text(EmployeeHospitalName);
			            $(".employee_info_result_table").show();

			            if(EmployeeID == 0){
			              alert("Error: Couldn't find the employee. Please check the information again !");
			            	}

						}catch {
							alert("Error : Please check the information again !");

						}

						$("select").change(function() {
							if($(this).val() == "hospital_choice") {
							$(".employee_info_result_table").hide();
							}
						});

						$("select").change(function() {
							if($(this).val() == "none") {
								$(".hospital_info_result_table").hide();
								$(".employee_info_result_table").hide();
							}
						});


					});
				});



			</script>


			<script>
				if(typeof web3!== 'undefined') {
					web3 = new Web3(web3.currentProvider);
				} else {
					web3 = new Web3(new Web3.providers.HttpProvider("HTTP://127.0.0.1:7545"));
				}
				web3.eth.defaultAccount = web3.eth.accounts[0];

				var account = web3.eth.defaultAccount;

				var contract = web3.eth.contract([
	{
		"constant": false,
		"inputs": [
			{
				"name": "_HospitalAddress",
				"type": "address"
			},
			{
				"name": "_TraineeAddress",
				"type": "address"
			},
			{
				"name": "_TraineeID",
				"type": "uint256"
			},
			{
				"name": "_TraineeName",
				"type": "string"
			},
			{
				"name": "_TrHospitalName",
				"type": "string"
			}
		],
		"name": "Add_Employees",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_HospitalAddress",
				"type": "address"
			},
			{
				"name": "_TraineeAddress",
				"type": "address"
			},
			{
				"name": "_TraineeID",
				"type": "uint256"
			},
			{
				"name": "_TraineeName",
				"type": "string"
			},
			{
				"name": "_TrHospitaName",
				"type": "string"
			},
			{
				"name": "_Category",
				"type": "string"
			},
			{
				"name": "_TraineeCertificate",
				"type": "string"
			},
			{
				"name": "_Signature",
				"type": "string"
			}
		],
		"name": "Add_Records",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_HospitalAddress",
				"type": "address"
			},
			{
				"name": "_HospitalID",
				"type": "uint256"
			},
			{
				"name": "_HospitalName",
				"type": "string"
			}
		],
		"name": "Authorise_Hospital",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_HospitalAddress",
				"type": "address"
			},
			{
				"name": "_TraineeAddress",
				"type": "address"
			},
			{
				"name": "_TraineeID",
				"type": "uint256"
			}
		],
		"name": "deleteEmployee",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_HospitalAddress",
				"type": "address"
			},
			{
				"name": "_HospitalID",
				"type": "uint256"
			}
		],
		"name": "deleteHospital",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_TraineeAddress",
				"type": "address"
			}
		],
		"name": "getListOfTraineesRecords",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "_HospitalAddress",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "_HospitalID",
				"type": "uint256"
			}
		],
		"name": "delete_Hospital",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "_HospitalAddress",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "_TraineeAddress",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "_TraineeID",
				"type": "uint256"
			},
			{
				"indexed": false,
				"name": "_TraineeName",
				"type": "string"
			},
			{
				"indexed": false,
				"name": "_TrHospitaName",
				"type": "string"
			},
			{
				"indexed": false,
				"name": "_Category",
				"type": "string"
			},
			{
				"indexed": false,
				"name": "_TraineeCertificate",
				"type": "string"
			},
			{
				"indexed": false,
				"name": "_Signature",
				"type": "string"
			}
		],
		"name": "add_Records",
		"type": "event"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "_NationalAuthority",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getListOfHospitals",
		"outputs": [
			{
				"components": [
					{
						"name": "_HospitalAddress",
						"type": "address"
					},
					{
						"name": "_HospitalID",
						"type": "uint256"
					},
					{
						"name": "_HospitalName",
						"type": "string"
					}
				],
				"name": "",
				"type": "tuple[]"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getListOfTrainees",
		"outputs": [
			{
				"components": [
					{
						"name": "_TraineeAddress",
						"type": "address"
					},
					{
						"name": "_TraineeID",
						"type": "uint256"
					},
					{
						"name": "_TraineeName",
						"type": "string"
					},
					{
						"name": "_TrHospitaName",
						"type": "string"
					},
					{
						"name": "_Category",
						"type": "string"
					},
					{
						"name": "_TraineeCertificate",
						"type": "string"
					},
					{
						"name": "_Signature",
						"type": "string"
					}
				],
				"name": "",
				"type": "tuple[]"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"name": "OfficialEmployees",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "Records",
		"outputs": [
			{
				"components": [
					{
						"name": "_TraineeAddress",
						"type": "address"
					},
					{
						"name": "_TraineeID",
						"type": "uint256"
					},
					{
						"name": "_TraineeName",
						"type": "string"
					},
					{
						"name": "_TrHospitaName",
						"type": "string"
					},
					{
						"name": "_Category",
						"type": "string"
					},
					{
						"name": "_TraineeCertificate",
						"type": "string"
					},
					{
						"name": "_Signature",
						"type": "string"
					}
				],
				"name": "",
				"type": "tuple[]"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "hash",
				"type": "bytes32"
			},
			{
				"name": "sig",
				"type": "bytes"
			}
		],
		"name": "recoverSigner",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "pure",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "_HospitalAddress",
				"type": "address"
			}
		],
		"name": "See_Authorised_Hospital",
		"outputs": [
			{
				"name": "",
				"type": "address"
			},
			{
				"name": "",
				"type": "uint256"
			},
			{
				"name": "",
				"type": "string"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "_TraineeAddress",
				"type": "address"
			}
		],
		"name": "See_Employee_Info",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			},
			{
				"name": "",
				"type": "string"
			},
			{
				"name": "",
				"type": "string"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "_TraineeAddress",
				"type": "address"
			}
		],
		"name": "See_Employee_Latest_Records",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			},
			{
				"name": "",
				"type": "string"
			},
			{
				"name": "",
				"type": "string"
			},
			{
				"name": "",
				"type": "string"
			},
			{
				"name": "",
				"type": "string"
			},
			{
				"name": "",
				"type": "string"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	}
]).at("0x0dde98481d145c110c499532f6ea4c08e73ee3c1");

			</script>





	</body>
</html>
